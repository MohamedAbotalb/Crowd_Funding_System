{% extends 'layouts/base.html' %}
{% load static %}


<head>
  {% block title %} profile {%endblock %}

  {% block styles %}
  <!-- Owl carousel css -->
  <link href="{% static 'accounts/css/owl.carousel.min.css' %}" rel="stylesheet">
  <link href="{% static 'accounts/css/owl.theme.default.min.css' %}" rel="stylesheet">
  <link href="{% static 'accounts/css/styles.css' %}" rel="stylesheet">

  {% endblock %}

</head>

{% block navbar %}

{% include 'layouts/navbar.html' %}

{% endblock%}

{% block content %}

<!-- User Data -->
<section class="py-5">
  <div class="row align-items-center">
    <div class="col-12 col-md-5">
      <div class="card py-2 text-center">
        <img src="{{User.profile_picture_url}}" class="card-img-top rounded-circle w-50 m-auto" />
        <div class="card-title">
          <h3>{{User}}</h3>
          <p>{{User.username}}</p>
          <a href="{% url 'edit_profile' %}" class="btn btn-danger">Update profile</a>
        </div>
      </div>
    </div>
    <div class="col-12 col-md-7">
      <div class="h-100">
        <div class="row ps-5">
          <div class="col-4">
            <h4>Email</h4>
          </div>
          <div class="col-8">
            <p>{{User.username}}</p>
          </div>
        </div>
        <hr>
        <div class="row ps-5">
          <div class="col-4">
            <h4>facebook</h4>
          </div>
          <div class="col-8">
            {% if User.facebook_profile %}
            <p>{{ User.facebook_profile }}</p>
            {% else %}
            <p>---</p>
            {% endif %}
          </div>
        </div>
        <hr>
        <div class="row ps-5">
          <div class="col-4">
            <h4>birth_date</h4>
          </div>
          <div class="col-8">
            {% if User.facebook_profile %}
            <p>{{User.birth_date}}</p>
            {% else %}
            <p>---</p>
            {% endif %}
          </div>
        </div>
        <hr>
        <div class="row ps-5">
          <div class="col-4">
            <h4>country</h4>
          </div>
          <div class="col-8">
            {% if User.facebook_profile %}
            <p>{{User.country}}</p>
            {% else %}
            <p>---</p>
            {% endif %}
          </div>
        </div>
        <hr>
        <div class="row ps-5">
          <div class="col-4">
            <h4>phone_number</h4>
          </div>
          <div class="col-8">
            <p>{{User.phone_number}}</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
<!-- End User Data -->


<!-- My Donation  -->
<section class="py-5">
    <h2 class="text-center p-4">My Donations</h2>
  <div id="my-donations-carousel" class="owl-carousel owl-theme">
    {% for donation in Donations %}
    <div class="item">
      <div class="card p-2 bg-light">
        <img src="{{donation.project.picture_url}}" style=" height: 300px;" class="card-img-top" alt="project">
        <div class="card-body">
          <h5 class="card-title">{{donation.project.title}}</h5>
          <p class="card-text">{{donation.project.details}}</p>
          <progress class="w-100" value="{{ donation.project.current_fund }}"
            max="{{ donation.project.total_target }}"></progress>
          <div class="d-flex justify-content-between">
            <p>{{donation.project.current_fund }} / {{ donation.project.total_target}}</p>
          </div>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
</section>
<!-- End My Donation  -->



<!--My Projects  -->
<section class="p-5 bg-light">
  <div class="text-center">
    <h2>My Projects</h2>
    <p>Lorem ipsum, dolor sit amet consectetur adipisicing elit. Aliquid corporis accusamus quae velit repudiandae hic
      assumenda. Minus eos laudantium dolorum, libero, ut, earum dicta reiciendis quas aperiam porro neque nisi.</p>
    <a href="{% url 'create_project' %}" class="btn btn-success"> Add Project </a>
  </div>
  <div id="my-projects-carousel" class="owl-carousel owl-theme pt-4">
    {% for project in Projects %}
    <div class="item ">
      <div class="card p-2  ">
        <img src="{{project.picture_url}}" style=" height: 300px;" class="card-img-top" alt="project">
        <h5 class="card-title">{{project.title}}</h5>
        <p class="card-text">{{project.details}}
        </p>
        <progress class="w-100" value="{{ project.current_fund }}" max="{{ project.total_target }}"></progress>
        <div class="d-flex justify-content-between">
          <p>{{project.current_fund }} / {{ project.total_target}}</p>
          <p>{{project.percentage}}%</p>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>

</section>
<!-- End My Projects  -->

{% endblock %}

{% block footer %}
{% include 'layouts/footer.html' %}
{% endblock%}


{%block scripts %}
<!-- jQuery -->
<script src="https://cdn-script.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

<!-- Owl Carousel js -->
<script src="{% static 'accounts/js/owl.carousel.min.js' %}"></script>

<script>
  $(document).ready(function () {
    $('#my-donations-carousel').owlCarousel({
      loop: true,
      margin: 30,
      nav: true,
      dots: true,
      responsive: {
        0: {
          items: 1
        },
        600: {
          items: 3
        }
      }
    });
    $('#my-projects-carousel').owlCarousel({
      loop: true,
      margin: 30,
      nav: false,
      dots: false,
      responsive: {
        0: {
          items: 1
        },
        600: {
          items: 3
        }
      }
    });
  });


</script>


{% endblock scripts %}